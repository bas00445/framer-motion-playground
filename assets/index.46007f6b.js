var A=Object.defineProperty;var f=(t,s)=>A(t,"name",{value:s,configurable:!0});import{r as n,j as h,F as P}from"./jsx-runtime.e9c6fbd0.js";import{a as L,f as K,u as O,P as j,b as S,L as T}from"./motion.a25b2a40.js";function v(){const t=n.exports.useRef(!1);return L(()=>(t.current=!0,()=>{t.current=!1}),[]),t}f(v,"useIsMounted");function B(){const t=v(),[s,e]=n.exports.useState(0),r=n.exports.useCallback(()=>{t.current&&e(s+1)},[s]);return[n.exports.useCallback(()=>K.postRender(r),[r]),s]}f(B,"useForceUpdate");class F extends n.exports.Component{getSnapshotBeforeUpdate(s){const e=this.props.childRef.current;if(e&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}f(F,"PopChildMeasure");function D({children:t,isPresent:s}){const e=n.exports.useId(),r=n.exports.useRef(null),x=n.exports.useRef({width:0,height:0,top:0,left:0});return n.exports.useInsertionEffect(()=>{const{width:l,height:a,top:p,left:C}=x.current;if(s||!r.current||!l||!a)return;r.current.dataset.motionPopId=e;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${a}px !important;
            top: ${p}px !important;
            left: ${C}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[s]),h(F,{isPresent:s,childRef:r,sizeRef:x,children:n.exports.cloneElement(t,{ref:r})})}f(D,"PopChild");const I=f(({children:t,initial:s,isPresent:e,onExitComplete:r,custom:x,presenceAffectsLayout:l,mode:a})=>{const p=O(G),C=n.exports.useId(),d=n.exports.useMemo(()=>({id:C,initial:s,isPresent:e,custom:x,onExitComplete:o=>{p.set(o,!0);for(const c of p.values())if(!c)return;r&&r()},register:o=>(p.set(o,!1),()=>p.delete(o))}),l?void 0:[e]);return n.exports.useMemo(()=>{p.forEach((o,c)=>p.set(c,!1))},[e]),n.exports.useEffect(()=>{!e&&!p.size&&r&&r()},[e]),a==="popLayout"&&(t=h(D,{isPresent:e,children:t})),h(j.Provider,{value:d,children:t})},"PresenceChild");function G(){return new Map}f(G,"newChildrenMap");function H(t){return n.exports.useEffect(()=>()=>t(),[])}f(H,"useUnmountEffect");const m=f(t=>t.key||"","getChildKey");function V(t,s){t.forEach(e=>{const r=m(e);s.set(r,e)})}f(V,"updateChildLookup");function W(t){const s=[];return n.exports.Children.forEach(t,e=>{n.exports.isValidElement(e)&&s.push(e)}),s}f(W,"onlyElements");const Q=f(({children:t,custom:s,initial:e=!0,onExitComplete:r,exitBeforeEnter:x,presenceAffectsLayout:l=!0,mode:a="sync"})=>{S(!x);const p=n.exports.useContext(T).forceRender||B()[0],C=v(),d=W(t);let o=d;const c=n.exports.useRef(new Map).current,R=n.exports.useRef(o),g=n.exports.useRef(new Map).current,y=n.exports.useRef(!0);if(L(()=>{y.current=!1,V(d,g),R.current=o}),H(()=>{y.current=!0,g.clear(),c.clear()}),y.current)return h(P,{children:o.map(i=>h(I,{isPresent:!0,initial:e?void 0:!1,presenceAffectsLayout:l,mode:a,children:i},m(i)))});o=[...o];const M=R.current.map(m),z=d.map(m),$=M.length;for(let i=0;i<$;i++){const u=M[i];z.indexOf(u)===-1&&!c.has(u)&&c.set(u,void 0)}return a==="wait"&&c.size&&(o=[]),c.forEach((i,u)=>{if(z.indexOf(u)!==-1)return;const w=g.get(u);if(!w)return;const b=M.indexOf(u);let E=i;E||(E=h(I,{isPresent:!1,onExitComplete:f(()=>{g.delete(u),c.delete(u);const U=R.current.findIndex(k=>k.key===u);if(R.current.splice(U,1),!c.size){if(R.current=d,C.current===!1)return;p(),r&&r()}},"onExit"),custom:s,presenceAffectsLayout:l,mode:a,children:w},m(w)),c.set(u,E)),o.splice(b,0,E)}),o=o.map(i=>{const u=i.key;return c.has(u)?i:h(I,{isPresent:!0,presenceAffectsLayout:l,mode:a,children:i},m(i))}),h(P,{children:c.size?o:o.map(i=>n.exports.cloneElement(i))})},"AnimatePresence");export{Q as A};
//# sourceMappingURL=index.46007f6b.js.map
